<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›¡ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;900&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', 'Poppins', sans-serif;
            background: linear-gradient(135deg, #4169E1 0%, #5B5FDB 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #4169E1;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            max-width: 150px;
        }

        h1 {
            color: #2d3748;
            font-size: 32px;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4169E1 0%, #5B5FDB 100%);
            color: white;
            padding: 25px;
            border-radius: 16px;
            text-align: center;
        }

        .stat-number {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 16px;
            opacity: 0.9;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Tajawal', 'Poppins', sans-serif;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #4169E1 0%, #5B5FDB 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(65, 105, 225, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 101, 101, 0.4);
        }

        .table-container {
            overflow-x: auto;
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #4169E1;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: 700;
            font-size: 16px;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            color: #2d3748;
        }

        tr:hover {
            background: #edf2f7;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #718096;
        }

        .empty-state-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 20px;
            font-weight: 600;
        }

        .lang-toggle {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            color: #718096;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Tajawal', 'Poppins', sans-serif;
        }

        .lang-btn.active {
            background: #4169E1;
            color: white;
            border-color: #4169E1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 24px;
            }

            .stat-number {
                font-size: 36px;
            }

            .actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        [dir="ltr"] th,
        [dir="ltr"] td {
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://cdn.prod.website-files.com/6506c1d067ca1ac9e35e732e/6508217276ec3097d0e7f37b_image%201.png" alt="Tameed Logo" class="logo">
            
            <h1 id="page-title">
                <span>ğŸ›¡ï¸</span>
                <span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
            </h1>
            
            <div class="lang-toggle">
                <button class="lang-btn active" onclick="setLang('ar')" id="btn-ar">Ø¹Ø±Ø¨ÙŠ</button>
                <button class="lang-btn" onclick="setLang('en')" id="btn-en">English</button>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="total-count">0</div>
                <div class="stat-label" id="label-total">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="ar-count">0</div>
                <div class="stat-label" id="label-ar">Ø§Ø³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="en-count">0</div>
                <div class="stat-label" id="label-en">Ø§Ø³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-primary" onclick="exportToExcel()">
                <span>ğŸ“¥</span>
                <span id="btn-export">ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel</span>
            </button>
            <button class="btn btn-secondary" onclick="loadData()">
                <span>ğŸ”„</span>
                <span id="btn-refresh">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
            </button>
            <button class="btn btn-danger" onclick="clearData()">
                <span>ğŸ—‘ï¸</span>
                <span id="btn-clear">Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
            </button>
        </div>

        <div class="table-container" id="table-container">
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“­</div>
                <div class="empty-state-text" id="empty-text">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</div>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'ar';

        const translations = {
            ar: {
                pageTitle: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                labelTotal: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†',
                labelAr: 'Ø§Ø³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                labelEn: 'Ø§Ø³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©',
                btnExport: 'ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel',
                btnRefresh: 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                btnClear: 'Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                emptyText: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†',
                colTime: 'Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª',
                colEmail: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                colLang: 'Ø§Ù„Ù„ØºØ©',
                confirmClear: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ',
                successClear: 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!',
                noData: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±!',
                exportError: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±!'
            },
            en: {
                pageTitle: 'Admin Dashboard',
                labelTotal: 'Total Employees',
                labelAr: 'Used Arabic',
                labelEn: 'Used English',
                btnExport: 'Export to Excel',
                btnRefresh: 'Refresh Data',
                btnClear: 'Clear All Data',
                emptyText: 'No data available yet',
                colTime: 'Date & Time',
                colEmail: 'Email Address',
                colLang: 'Language',
                confirmClear: 'Are you sure you want to delete all data?',
                successClear: 'Data cleared successfully!',
                noData: 'No data to export!',
                exportError: 'Export error!'
            }
        };

        function setLang(lang) {
            currentLang = lang;
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
            
            document.getElementById('btn-ar').classList.toggle('active', lang === 'ar');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            
            updateLabels();
            loadData();
        }

        function updateLabels() {
            const t = translations[currentLang];
            document.getElementById('page-title').innerHTML = `<span>ğŸ›¡ï¸</span><span>${t.pageTitle}</span>`;
            document.getElementById('label-total').textContent = t.labelTotal;
            document.getElementById('label-ar').textContent = t.labelAr;
            document.getElementById('label-en').textContent = t.labelEn;
            document.getElementById('btn-export').textContent = t.btnExport;
            document.getElementById('btn-refresh').textContent = t.btnRefresh;
            document.getElementById('btn-clear').textContent = t.btnClear;
            document.getElementById('empty-text').textContent = t.emptyText;
        }

        function loadData() {
            try {
                const data = JSON.parse(localStorage.getItem('phishing_emails') || '[]');
                const t = translations[currentLang];
                
                // Update stats
                document.getElementById('total-count').textContent = data.length;
                document.getElementById('ar-count').textContent = data.filter(d => d.language === 'Ø¹Ø±Ø¨ÙŠ').length;
                document.getElementById('en-count').textContent = data.filter(d => d.language === 'English').length;
                
                // Build table
                const container = document.getElementById('table-container');
                
                if (data.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“­</div>
                            <div class="empty-state-text">${t.emptyText}</div>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>${t.colTime}</th>
                                <th>${t.colEmail}</th>
                                <th>${t.colLang}</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                data.reverse().forEach(item => {
                    html += `
                        <tr>
                            <td>${item.timestamp}</td>
                            <td>${item.email}</td>
                            <td>${item.language}</td>
                        </tr>
                    `;
                });
                
                html += `
                        </tbody>
                    </table>
                `;
                
                container.innerHTML = html;
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function exportToExcel() {
            try {
                const data = JSON.parse(localStorage.getItem('phishing_emails') || '[]');
                const t = translations[currentLang];
                
                if (data.length === 0) {
                    alert(t.noData);
                    return;
                }
                
                // Create CSV content
                let csv = '\uFEFF'; // UTF-8 BOM for Excel Arabic support
                csv += 'Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª,Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ,Ø§Ù„Ù„ØºØ©\n';
                
                data.forEach(item => {
                    csv += `"${item.timestamp}","${item.email}","${item.language}"\n`;
                });
                
                // Create download link
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                const filename = `QR_Phishing_Results_${new Date().toISOString().split('T')[0]}.csv`;
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                console.log('âœ… Exported', data.length, 'emails to Excel');
            } catch (error) {
                console.error('âŒ Error exporting:', error);
                alert(translations[currentLang].exportError);
            }
        }

        function clearData() {
            const t = translations[currentLang];
            if (confirm(t.confirmClear)) {
                localStorage.removeItem('phishing_emails');
                alert(t.successClear);
                loadData();
                console.log('ğŸ—‘ï¸ All data cleared');
            }
        }

        // Load data on page load
        window.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
